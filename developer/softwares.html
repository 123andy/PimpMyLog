<!DOCTYPE html><!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"><![endif]--><!--[if IE 7]><html class="no-js lt-ie9 lt-ie8"><![endif]--><!--[if IE 8]><html class="no-js lt-ie9"><![endif]--><!--[if gt IE 8]><!--><html class="no-js"><!--<![endif]--><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="description" content="Log viewer for your web server"><meta name="viewport" content="width=device-width"><title>[Pimp my Log] Software format</title><link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/apple-touch-icon.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/apple-touch-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/apple-touch-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/apple-touch-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/apple-touch-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/apple-touch-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/apple-touch-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/apple-touch-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/apple-touch-icon-152x152.png"><link href="http://pimpmylog.com/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed"><link href="http://pimpmylog.com/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed"><link href="//fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet" type="text/css"><link rel="stylesheet" href="/dist/global.min.css?pml=1208140917"><script type="text/javascript">var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-44146210-2']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();</script><style>body {
				padding-top: 60px;
				padding-bottom: 20px;
			}</style></head><body><!--[if lt IE 7]><p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p><![endif]--><div class="navbar navbar-inverse navbar-fixed-top"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse"><span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a href="/"><div class="logo"></div></a></div><div class="navbar-collapse collapse navbar-right"><ul class="nav navbar-nav"><li><a href="/">Home</a></li><li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">Getting Started <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="/getting-started/">Introduction</a></li><li class="divider"></li><li><a href="/getting-started/quick-start.html">Quick start</a></li><li><a href="/getting-started/screenshots.html">Screenshots</a></li></ul></li><li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="/documentation/">Introduction</a></li><li class="divider"></li><li><a href="/documentation/change-log.html">Change log</a></li><li><a href="/documentation/configuration.html">Configuration</a></li><li><a href="/documentation/customization.html">Customization</a></li></ul></li><li class="dropdown active"><a href="#" class="dropdown-toggle" data-toggle="dropdown">Developer <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="/developer/">Introduction</a></li><li class="divider"></li><li><a href="/developer/debug.html">Debug</a></li><li class="active"><a href="/developer/softwares.html">Softwares</a></li></ul></li><li><a href="/blog/">Blog</a></li><li><a href="/search/">Search</a></li><li><a href="http://support.pimpmylog.com">Support</a></li></ul></div></div></div><div class="container"><h1 id="toc_0">1 - Introduction</h1><p>You can add new softwares in <em>Pimp My Log</em> for all <em>Pimp My Log</em> users.</p><p>The first default included software is <em>apache</em>.</p><p>When we will add some softwares, users will have to choose which softwares they want during the configuration part at the first launch.</p><h1 id="toc_1">2 - Configuration process</h1><p>At first launch, <em>Pimp My Log</em> will launch the configurator and will :</p><ul><li>check if there is several softwares to propose to the user. If there is only <em>apache</em>, the next step will be skipped. The list is defined in <code>cfg/softwares.inc.php</code> and then in your custom file <code>cfg/softwares.inc.user.php</code>.</li><li>user choose which software he wants</li><li>for each wanted software, <em>Pimp My Log</em>:<ul><li>searches for log files in all pre-defined files in all pre-defined paths. Pre-defined files and paths are defined in file <code>cfg/SOFTWARE.paths.php</code>.</li><li>proposes found files to the user</li><li>lets user fill custom paths</li><li>check if user custom paths are reachable</li></ul></li><li>when all softwares are parsed, <em>Pimp My Log</em> will generate the configuration file:<ul><li>with the default skeleton <code>cfg/pimpmylog.config.json</code></li><li>with all files but for each file, <em>Pimp My Log</em> will try to guess the structure of a line by delegating the check to all <code>cfg/SOFTWARE.config.php</code> files.</li></ul></li></ul><h1 id="toc_2">3 - Build a configurator</h1><h2 id="toc_3">3.1 - Write your configuration file</h2><p>Before all, you should manually create your configuration file to support the new software.</p><p>Once you have written the RegEx, <code>match</code> and <code>types</code> arrays, save your configuration file somewhere on your hard-drive, we will need it later. Read the documentation menu and all other developer menus to do this.</p><h2 id="toc_4">3.2 - Enhance your software list</h2><p>To add a new software, create your own enhanced software list. It will define your new software. Don&#39;t modify directly <code>cfg/softwares.inc.php</code>, you will not be able to update <em>Pimp My Log</em> during you development phase and you could lose your work!</p><p>Copy <code>cfg/softwares.inc.php</code> to <code>cfg/softwares.inc.user.php</code>.</p><blockquote><p><strong>Note</strong></p><p>File <code>cfg/softwares.inc.user.php</code> is not overwritten while updating <em>Pimp My Log</em> via a <code>git pull</code>.</p></blockquote><p>Edit <code>cfg/softwares.inc.user.php</code> :</p><ul><li>remove all uncomment lines</li><li>uncomment comments</li><li>remove all non PHP lines</li></ul><p>You should have something like this:</p><div class="highlight"><pre><code class="php language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nv">$softwares_all</span><span class="p">[</span> <span class="s1">&#39;my_software&#39;</span> <span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;name&#39;</span>  <span class="o">=&gt;</span> <span class="nx">__</span><span class="p">(</span><span class="s1">&#39;My Super Software&#39;</span><span class="p">),</span>
    <span class="s1">&#39;desc&#39;</span>  <span class="o">=&gt;</span> <span class="nx">__</span><span class="p">(</span><span class="s1">&#39;My Super Software build with love for you users which are installing Pimp my Log !&#39;</span><span class="p">),</span>
    <span class="s1">&#39;home&#39;</span>  <span class="o">=&gt;</span> <span class="nx">__</span><span class="p">(</span><span class="s1">&#39;http://www.example.com&#39;</span><span class="p">),</span>
    <span class="s1">&#39;notes&#39;</span> <span class="o">=&gt;</span> <span class="nx">__</span><span class="p">(</span><span class="s1">&#39;All versions 2.x are supported but 1.x too in fact.&#39;</span><span class="p">),</span>
    <span class="s1">&#39;load&#39;</span>  <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
<span class="p">);</span>
<span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div><p>Change wanted values:</p><ul><li><code>my_software</code> is the software <em>ID</em> like <em>nginx</em> or <em>apache24</em> if there is a specific configuration for <em>apache 2.4</em>,...</li><li><code>name</code> is the common name of the software</li><li><code>desc</code> is a short description to let users understand what is this software</li><li><code>home</code> is the link of the homepage of the software to give users more informations</li><li><code>notes</code> is your personal notes about your software support in <em>Pimp My Log</em> (what is provided, covered,...)</li><li><code>load</code> is a boolean which tells to <em>Pimp My Log</em> if this software should be checked by default when the software list is provided to users</li></ul><p>Now, if you remove your configuration file <code>config.user.json</code> to start a new <em>Pimp My Log</em> instance, <em>Pimp My Log</em> will ask you which softwares to install. Nice!</p><h2 id="toc_5">3.3 - Add your software common paths</h2><p>Now that you have declared a new software, you have to explain to <em>Pimp My Log</em> where it can check for new log files for your software.</p><p>Theses paths have to be declared in a file named <code>cfg/ID.paths.user.php</code> where ID is the value of <code>my_software</code> in the paragraph above.</p><blockquote><p><strong>Note</strong></p><p>File <code>ID.paths.user.php</code> is not overwritten while updating <em>Pimp My Log</em> via a <code>git pull</code>.</p></blockquote><p>Take this example:</p><div class="highlight"><pre><code class="php language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="nv">$paths</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;/var/log/&#39;</span><span class="p">,</span>
    <span class="s1">&#39;/var/log/apache/&#39;</span><span class="p">,</span>
    <span class="s1">&#39;C:/wamp/logs/&#39;</span><span class="p">,</span>
<span class="p">);</span>

<span class="nv">$files</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;error&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;error.log&#39;</span><span class="p">,</span>
        <span class="s1">&#39;error_log&#39;</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="s1">&#39;access&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;access.log&#39;</span><span class="p">,</span>
        <span class="s1">&#39;access_log&#39;</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">);</span>
<span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div><p>You must define both arrays:</p><ul><li><code>$paths</code> is a flat array which defines all possible paths where log files can be stored in all major linux distributions, Windows versions, MAC OS X versions, ...</li><li><code>$files</code> is an array of <code>file</code> arrays. Each file defines a type of log. Indeed a software can have several types of log files. So for each type, you define an array which defines itself all possible file names in all major linux distributions, Windows versions, MAC OS X versions, ...</li></ul><p>In the example above, <em>Pimp My Log</em> will check for 2 types of log files :</p><ul><li>for <em>error</em> log files in the following locations:<ul><li><code>/var/log/error.log</code></li><li><code>/var/log/apache/error.log</code></li><li><code>C:/wamp/logs/error.log</code></li><li><code>/var/log/error_log</code></li><li><code>/var/log/apache/error_log</code></li><li><code>C:/wamp/logs/error_log</code></li></ul></li><li>for <em>access</em> log files in the following locations:<ul><li><code>/var/log/access.log</code></li><li><code>/var/log/apache/access.log</code></li><li><code>C:/wamp/logs/access.log</code></li><li><code>/var/log/access_log</code></li><li><code>/var/log/apache/access_log</code></li><li><code>C:/wamp/logs/access_log</code></li></ul></li></ul><blockquote><p><strong>Note</strong><br>Even if your software just uses a single type of log file, <code>$files</code> has to be an array of array.</p></blockquote><h2 id="toc_6">3.4 - Add your software configurator</h2><p>Finally, you have to create a function which will return the JSON configuration part for a single log file.</p><p>This generator function has to be created in a file name named <code>cfg/ID.config.user.php</code>.</p><p>This function has to be named <code>ID_get_config( $type , $file , $software , $counter )</code></p><p>With the same example:</p><div class="highlight"><pre><code class="php"><span class="lineno"> 1</span> <span class="cp">&lt;?php</span>
<span class="lineno"> 2</span> <span class="k">function</span> <span class="nf">ID_get_config</span><span class="p">(</span> <span class="nv">$type</span> <span class="p">,</span> <span class="nv">$file</span> <span class="p">,</span> <span class="nv">$software</span> <span class="p">,</span> <span class="nv">$counter</span> <span class="p">)</span> <span class="p">{</span>
<span class="lineno"> 3</span>     <span class="k">if</span> <span class="p">(</span> <span class="nv">$type</span> <span class="o">==</span> <span class="s1">&#39;error&#39;</span> <span class="p">)</span> <span class="p">{</span>
<span class="lineno"> 4</span>         <span class="k">return</span><span class="s">&lt;&lt;&lt;EOF</span>
<span class="lineno"> 5</span> <span class="s">            &quot;$software$counter&quot;: {</span>
<span class="lineno"> 6</span> <span class="s">                &quot;display&quot; : &quot;Apache Error #$counter&quot;,</span>
<span class="lineno"> 7</span> <span class="s">                &quot;path&quot;    : &quot;$file&quot;,</span>
<span class="lineno"> 8</span> <span class="s">                ...</span>
<span class="lineno"> 9</span> <span class="s">                &quot;format&quot;  : {</span>
<span class="lineno">10</span> <span class="s">                    &quot;regex&quot;: &quot;|^\\\\[(.*) (.*) (.*) (.*):(.*):(.*)\\\\.(.*) (.*)\\\\] \\\\[(.*):(.*)\\\\] \\\\[pid (.*)\\\\] .*\\\\[client (.*):(.*)\\\\] (.*)(, referer: (.*))*\$|U&quot;,</span>
<span class="lineno">11</span> <span class="s">                    &quot;match&quot;: { ... },</span>
<span class="lineno">12</span> <span class="s">                    &quot;types&quot;: { ... },</span>
<span class="lineno">13</span> <span class="s">                    &quot;exclude&quot;: { ... }</span>
<span class="lineno">14</span> <span class="s">                }</span>
<span class="lineno">15</span> <span class="s">            }</span>
<span class="lineno">16</span> <span class="s">EOF;</span>
<span class="lineno">17</span>     <span class="p">}</span>
<span class="lineno">18</span>     <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nv">$type</span> <span class="o">==</span> <span class="s1">&#39;access&#39;</span> <span class="p">)</span> <span class="p">{</span>
<span class="lineno">19</span>         <span class="k">return</span> <span class="o">...</span><span class="p">;</span>
<span class="lineno">20</span>     <span class="p">}</span>
<span class="lineno">21</span> <span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div><p>Here are some explanations:</p><ul><li><em>line 3</em> : <code>$type</code> if the type of log defined in your <code>ID.paths.user.php</code> file.</li><li><em>line 5</em> : <code>$software$counter</code> is the concatenation of the software name and a software counter during the configuration process. Defined like this, this <em>ID</em> is unique and <strong>must</strong> be unique.</li><li><em>line 6</em> : <code>Apache Error #$counter</code> is the displayed name for final users. <code>$counter</code> is added to let users understand which file they are displaying in <em>Pimp My Log</em>.</li></ul><h1 id="toc_7">4 - Delivery</h1><p>You can make a <a href="pullrequest">GitHub Pull Request</a> on the <em>dev</em> branch only or send us your files via a discussion in the <a href="http://pimpmylog.com">support</a> website.</p><p>Then we will:</p><ul><li>include your <code>cfg/softwares.inc.user.php</code> to the original <code>cfg/softwares.inc.php</code> file</li><li>copy your <code>cfg/ID.paths.user.php</code> file to <code>cfg/ID.paths.php</code></li><li>copy your <code>cfg/ID.config.user.php</code> file to <code>cfg/ID.config.php</code></li><li>refresh translation files and prepare <code>.po</code> templates</li><li>try it!</li></ul><hr><footer><div class="pull-left">&copy; 2014 <a href="http://www.potsky.com">Potsky</a></div><div class="pull-right"><ul class="list-inline"><li><a href="http://support.pimpmylog.com">Support</a></li><li><a href="https://github.com/potsky/PimpMyLog">GitHub</a></li><li><a href="/rss.xml">RSS</a></li><li class="hidden-xs hidden-sm inline-block"><a href="/atom.xml">Atom</a></li></ul></div></footer></div><script src="/dist/global.min.js?pml=1208140917"></script></body></html>